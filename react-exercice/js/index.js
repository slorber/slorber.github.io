"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getNextColor(e){switch(e.color){case"red":return"blue";case"blue":return"green";case"green":return"red";default:return"red"}}var NewItem=function(e){function t(n){_classCallCheck(this,t),e.call(this,n),this.state={value:""}}return _inherits(t,e),t.prototype.handleChange=function(e){this.setState({value:e.target.value})},t.prototype.submitChange=function(){this.state.value?(this.props.onNewItem(this.state.value),this.setState({value:""})):alert("Empty input!")},t.prototype.render=function(){return React.createElement("div",{className:"new-item"},React.createElement("input",{className:"new-item-input",placeholder:"Add new item",type:"text",onChange:this.handleChange.bind(this),onClick:function(e){return e.stopPropagation()},value:this.state.value}),React.createElement("button",{onClick:this.submitChange.bind(this)},"Submit"))},t}(React.Component);NewItem.propTypes={onNewItem:React.PropTypes.func.isRequired};var Item=function(e){function t(){_classCallCheck(this,t),e.apply(this,arguments)}return _inherits(t,e),t.prototype.handleColorChangeClick=function(e){e.stopPropagation(),e.preventDefault(),this.props.onColorChange()},t.prototype.handleDeleteClick=function(e){e.stopPropagation(),e.preventDefault(),this.props.onDelete()},t.prototype.render=function(){return React.createElement("div",{className:"item"},React.createElement("div",{className:"item-text",style:{color:this.props.item.color||"black"}},this.props.item.text),React.createElement("button",{className:"item-change-color",onClick:this.handleColorChangeClick.bind(this)},"Change color"),React.createElement("button",{className:"item-delete",onClick:this.handleDeleteClick.bind(this)},"Delete"))},t}(React.Component);Item.propTypes={item:React.PropTypes.object.isRequired,onColorChange:React.PropTypes.func.isRequired,onDelete:React.PropTypes.func.isRequired};var Main=function(e){function t(n){_classCallCheck(this,t),e.call(this,n),this.state={items:[{text:"Apple"},{text:"Orange"},{text:"Lemon"},{text:"Lime"}]}}return _inherits(t,e),t.prototype.addItem=function(e){var t=this.state.items.concat({text:e,color:this.state.lastColorSet});this.setState({items:t})},t.prototype.removeItem=function(e){var t=_.without(this.state.items,e);this.setState({items:t})},t.prototype.changeColor=function(e){var t=_.indexOf(this.state.items,e),n=getNextColor(e),o={text:e.text,color:getNextColor(e)},r=this.state.items.slice();r[t]=o,this.setState({items:r,lastColorSet:n})},t.prototype.renderItem=function(e){return React.createElement(Item,{item:e,onColorChange:this.changeColor.bind(this,e),onDelete:this.removeItem.bind(this,e)})},t.prototype.getBorderStyle=function(){var e=this.state.lastColorSet||"lightgrey";return{boxSizing:"border-box",border:"solid "+e}},t.prototype.resetMainBorder=function(){this.setState({lastColorSet:void 0})},t.prototype.render=function(){var e=this,t=this.state.items.map(function(t){return e.renderItem(t)});return React.createElement("div",{className:"main",style:this.getBorderStyle(),onClick:this.resetMainBorder.bind(this)},t,React.createElement(NewItem,{onNewItem:this.addItem.bind(this)}))},t}(React.Component);React.render(React.createElement(Main,null),document.getElementById("app-container"));
